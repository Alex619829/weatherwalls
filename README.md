# weatherwalls
Программа, работающая в фоне, которая меняет обои рабочего стола в зависимости от погоды.
Программа работает только на OC Linux.
Программа пока поддерживает только окружение рабочего стола Gnome
# Описание
Программа находит местоположение вашего компьютера и определяет погоду в этом месте, а так же получает сведения о времени суток.
На основе полученных данных, программа ставит подходящие обои на рабочий стол Вашего компьютера.
Также можно включить изменение обоев в браузере Firefox.
# Исходный код
1. Makefile - установка / удаление.
2. autostart.sh - скрипт для управления автозагрузкой программы.
3. weatherwalls.desktop - файл конфигурации для автозагрузки.
4. weatherwalls.pl - скрипт для запуска программы после установки.
5. weatherw.pl - главный файл программы.
6. Services/dict.pm - модуль, содержащий словарь с описанием погоды.
7. Services/sun.pm - модуль для определения времени суток.
8. Services/weather.pm - модуль для получения описания погоды.
9. Services/firefox.pm - модуль для изменения обоев в Firefox.
9. img/ - каталог с обоями.
# Установка
* Важно! При установке команды выполняются с sudo, чтобы установить программу в систему для всех пользователей!
1. Скачайте исходный код на свой компьютер:
```git clone https://github.com/Alex619829/weatherwalls.git```
2. Запустите скрипт для установки программы в систему из корневой директории скачанного репозитория:
```sudo make install```
* В ходе установки программа может спросить Вас хотите ли Вы выполнить настройку cpan в автоматическом режиме [yes]. Просто нажмите 'Enter' и установка продолжится.
Программа установится на Ваш компьютер и автоматически добавится в автозагрузку.
3. Вы можете добавить или удалить установленную программу из автозагрузки:
* Важно! Следующие команды запускаются без sudo, так как вы собираетесь менять обои на своем рабочем столе, а не на рабочем столе суперпользователя!
#  Использование
* Перед использованием необходимо зарегистрироваться получить бесплатный API ключ геолокатора в личном кабинете `https://yandex.com/maps-api/docs/locator/examples.html`.
Далее необходимо в фале /var/lib/weatherwalls/.env указать Ваш API-ключ:
```
YANDEX_API_KEY="your_api_key"
``` 
* Запустить программу - 'weatherwalls on'.
* Выключить программу - 'weatherwalls off'.
# Firefox mode
* Программа поддерживает смену обоев в браузере Mozilla Firefox.
Для того, чтобы запустить программу с поддержкой Firefox необходимо:
1. Установить Firefox (если не установлен).
2. Установить расширение **[Bonjourr](https://addons.mozilla.org/ru/firefox/addon/bonjourr-startpage/)** в Firefox. Это изменит Вашу стартовую страницу.
3. Выбрать в настройках расширения "Тип фона" - "Локальный файл".
4. Добавить произвольное изображение в качестве фона.
5. Запустить программу с флагом "firefox":
```weatherwalls on firefox```
Программа автоматически будет менять фон на главной вкладке Firefox.
# Автозапуск
* Если Вы хотите добавить программу в автозапуск, для этого выоплните команду в корневой директории проекта:
```/var/lib/weatherwalls/autostart.sh on```
По умолчанию, в автозапуске Firefox mode выключен, если хотите его включить, исправьте команду запуска (на ```weatherwalls on firefox```) в файле `~/.config/autostart/weatherwalls.desktop`.
* Удалить программу из автозапуска:
```/var/lib/weatherwalls/autostart.sh on```
